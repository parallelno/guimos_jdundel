memusage_loads:
;===============================================
; permanent
;===============================================
			PERMANENT_DECALS0_RAM_DISK_M = RAM_DISK_M0
			PERMANENT_DECALS0_RAM_DISK_S = RAM_DISK_S0
			PERMANENT_DECALS0_ADDR = 0x8000

			PERMANENT_VFX4_RAM_DISK_M = RAM_DISK_M0
			PERMANENT_VFX4_RAM_DISK_S = RAM_DISK_S0
			PERMANENT_VFX4_ADDR = 0x9234

			PERMANENT_BACKS0_RAM_DISK_M = RAM_DISK_M0
			PERMANENT_BACKS0_RAM_DISK_S = RAM_DISK_S0
			PERMANENT_BACKS0_ADDR = 0x9C84

			PERMANENT_FONT_RAM_DISK_M = RAM_DISK_M1
			PERMANENT_FONT_RAM_DISK_S = RAM_DISK_S1
			PERMANENT_FONT_ADDR = 0x8000

			PERMANENT_VFX_RAM_DISK_M = RAM_DISK_M1
			PERMANENT_VFX_RAM_DISK_S = RAM_DISK_S1
			PERMANENT_VFX_ADDR = 0x8658

			PERMANENT_BOMB_RAM_DISK_M = RAM_DISK_M1
			PERMANENT_BOMB_RAM_DISK_S = RAM_DISK_S1
			PERMANENT_BOMB_ADDR = 0x8B62

			PERMANENT_PAL_MENU_RAM_DISK_M = RAM_DISK_M1
			PERMANENT_PAL_MENU_RAM_DISK_S = RAM_DISK_S1
			PERMANENT_PAL_MENU_ADDR = 0x8E02

			PERMANENT_PAL_LV1_RAM_DISK_M = RAM_DISK_M1
			PERMANENT_PAL_LV1_RAM_DISK_S = RAM_DISK_S1
			PERMANENT_PAL_LV1_ADDR = 0x8EAA

			PERMANENT_SONG01_RAM_DISK_M = RAM_DISK_M2
			PERMANENT_SONG01_RAM_DISK_S = RAM_DISK_S2
			PERMANENT_SONG01_ADDR = 0x8000


load_permanent_load_params:
			FILE_LOAD_PARAMS(DECALS0_FILENAME_PTR, PERMANENT_DECALS0_RAM_DISK_S, PERMANENT_DECALS0_ADDR, DECALS0_FILE_LEN)
			FILE_LOAD_PARAMS(VFX4_FILENAME_PTR, PERMANENT_VFX4_RAM_DISK_S, PERMANENT_VFX4_ADDR, VFX4_FILE_LEN)
			FILE_LOAD_PARAMS(BACKS0_FILENAME_PTR, PERMANENT_BACKS0_RAM_DISK_S, PERMANENT_BACKS0_ADDR, BACKS0_FILE_LEN)
			FILE_LOAD_PARAMS(FONT_FILENAME_PTR, PERMANENT_FONT_RAM_DISK_S, PERMANENT_FONT_ADDR, FONT_FILE_LEN)
			FILE_LOAD_PARAMS(VFX_FILENAME_PTR, PERMANENT_VFX_RAM_DISK_S, PERMANENT_VFX_ADDR, VFX_FILE_LEN)
			FILE_LOAD_PARAMS(BOMB_FILENAME_PTR, PERMANENT_BOMB_RAM_DISK_S, PERMANENT_BOMB_ADDR, BOMB_FILE_LEN)
			FILE_LOAD_PARAMS(PAL_MENU_FILENAME_PTR, PERMANENT_PAL_MENU_RAM_DISK_S, PERMANENT_PAL_MENU_ADDR, PAL_MENU_FILE_LEN)
			FILE_LOAD_PARAMS(PAL_LV1_FILENAME_PTR, PERMANENT_PAL_LV1_RAM_DISK_S, PERMANENT_PAL_LV1_ADDR, PAL_LV1_FILE_LEN)
			FILE_LOAD_PARAMS(SONG01_FILENAME_PTR, PERMANENT_SONG01_RAM_DISK_S, PERMANENT_SONG01_ADDR, SONG01_FILE_LEN)

load_permanent_sprite_init_data:
			.word vfx4_ram_disk_s_cmd
			.byte PERMANENT_VFX4_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word PERMANENT_VFX4_ADDR
			.word backs0_ram_disk_s_cmd
			.byte PERMANENT_BACKS0_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word PERMANENT_BACKS0_ADDR
			.word vfx_ram_disk_s_cmd
			.byte PERMANENT_VFX_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word PERMANENT_VFX_ADDR
			.word bomb_ram_disk_s_cmd
			.byte PERMANENT_BOMB_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word PERMANENT_BOMB_ADDR

load_permanent:
			lxi h, load_permanent_load_params
			mvi e, 9
			call load_files_from_params

			lxi h, load_permanent_sprite_init_data
			mvi e, 4
			call sprite_init_meta_data

			lxi h, decals0_gfx_ptrs
			lxi b, PERMANENT_DECALS0_ADDR
			call add_offset_to_labels_eod

			mvi a, PERMANENT_FONT_RAM_DISK_S
			lxi h, font_gfx_ptrs
			lxi b, PERMANENT_FONT_ADDR
			call text_ex_init_font

			lxi d, PERMANENT_SONG01_ADDR
			lxi h, song01_ay_reg_data_ptrs
			call v6_gc_init_song

			ret

uninit_permanent:
			lxi h, load_permanent_sprite_init_data
			mvi e, 4
			call sprite_uninit_meta_data

			lxi h, decals0_gfx_ptrs
			lxi b, $ffff - PERMANENT_DECALS0_ADDR + 1
			call add_offset_to_labels_eod

			mvi a, PERMANENT_FONT_RAM_DISK_S
			lxi h, font_gfx_ptrs
			lxi b, $ffff - PERMANENT_FONT_ADDR + 1
			call text_ex_init_font

			lxi d, $ffff - PERMANENT_SONG01_ADDR + 1
			lxi h, song01_ay_reg_data_ptrs
			call v6_gc_init_song

			ret
;===============================================
; menu
;===============================================
			MENU_TXT_MENU_RAM_DISK_M = RAM_DISK_M1
			MENU_TXT_MENU_RAM_DISK_S = RAM_DISK_S1
			MENU_TXT_MENU_ADDR = 0x8F3E

			MENU_TIM_DATA_RAM_DISK_M = RAM_DISK_M1
			MENU_TIM_DATA_RAM_DISK_S = RAM_DISK_S1
			MENU_TIM_DATA_ADDR = 0x93B0

			MENU_TIM_GFX_RAM_DISK_M = RAM_DISK_M2
			MENU_TIM_GFX_RAM_DISK_S = RAM_DISK_S2
			MENU_TIM_GFX_ADDR = 0xB044


load_menu_load_params:
			FILE_LOAD_PARAMS(TXT_MENU_FILENAME_PTR, MENU_TXT_MENU_RAM_DISK_S, MENU_TXT_MENU_ADDR, TXT_MENU_FILE_LEN)
			FILE_LOAD_PARAMS(TIM_DATA_FILENAME_PTR, MENU_TIM_DATA_RAM_DISK_S, MENU_TIM_DATA_ADDR, TIM_DATA_FILE_LEN)
			FILE_LOAD_PARAMS(TIM_GFX_FILENAME_PTR, MENU_TIM_GFX_RAM_DISK_S, MENU_TIM_GFX_ADDR, TIM_GFX_FILE_LEN)

load_menu_sprite_init_data:

load_menu:
			lxi h, load_menu_load_params
			mvi e, 3
			call load_files_from_params

			mvi a, MENU_TXT_MENU_RAM_DISK_S
			lxi h, MENU_TXT_MENU_ADDR
			call text_ex_init_text

			mvi a, MENU_TIM_DATA_RAM_DISK_S
			lxi h, MENU_TIM_DATA_ADDR
			call tiled_img_init_idxs

			mvi a, MENU_TIM_GFX_RAM_DISK_S
			lxi h, MENU_TIM_GFX_ADDR
			call tiled_img_init_gfx

			ret

uninit_menu:
			mvi a, MENU_TIM_DATA_RAM_DISK_S
			lxi h, $ffff - MENU_TIM_DATA_ADDR + 1
			call tiled_img_init_idxs

			mvi a, MENU_TIM_GFX_RAM_DISK_S
			lxi h, $ffff - MENU_TIM_GFX_ADDR + 1
			call tiled_img_init_gfx

			ret
;===============================================
; level0
;===============================================
			LEVEL0_CAT_RAM_DISK_M = RAM_DISK_M0
			LEVEL0_CAT_RAM_DISK_S = RAM_DISK_S0
			LEVEL0_CAT_ADDR = 0x0000

			LEVEL0_LV0_GFX_RAM_DISK_M = RAM_DISK_M0
			LEVEL0_LV0_GFX_RAM_DISK_S = RAM_DISK_S0
			LEVEL0_LV0_GFX_ADDR = 0x19E4

			LEVEL0_BURNER_RAM_DISK_M = RAM_DISK_M0
			LEVEL0_BURNER_RAM_DISK_S = RAM_DISK_S0
			LEVEL0_BURNER_ADDR = 0x3282

			LEVEL0_SWORD_RAM_DISK_M = RAM_DISK_M0
			LEVEL0_SWORD_RAM_DISK_S = RAM_DISK_S0
			LEVEL0_SWORD_ADDR = 0x4A66

			LEVEL0_TXT_LV0_RAM_DISK_M = RAM_DISK_M0
			LEVEL0_TXT_LV0_RAM_DISK_S = RAM_DISK_S0
			LEVEL0_TXT_LV0_ADDR = 0x61F6

			LEVEL0_TI0_GFX_RAM_DISK_M = RAM_DISK_M1
			LEVEL0_TI0_GFX_RAM_DISK_S = RAM_DISK_S1
			LEVEL0_TI0_GFX_ADDR = 0x0000

			LEVEL0_NPC_RAM_DISK_M = RAM_DISK_M1
			LEVEL0_NPC_RAM_DISK_S = RAM_DISK_S1
			LEVEL0_NPC_ADDR = 0x0D8C

			LEVEL0_GOOSE_RAM_DISK_M = RAM_DISK_M1
			LEVEL0_GOOSE_RAM_DISK_S = RAM_DISK_S1
			LEVEL0_GOOSE_ADDR = 0x8F3E

			LEVEL0_FIREPOOL_RAM_DISK_M = RAM_DISK_M1
			LEVEL0_FIREPOOL_RAM_DISK_S = RAM_DISK_S1
			LEVEL0_FIREPOOL_ADDR = 0x9D5E

			LEVEL0_HERO_RAM_DISK_M = RAM_DISK_M2
			LEVEL0_HERO_RAM_DISK_S = RAM_DISK_S2
			LEVEL0_HERO_ADDR = 0xB044

			LEVEL0_SNOWFLAK_RAM_DISK_M = RAM_DISK_M2
			LEVEL0_SNOWFLAK_RAM_DISK_S = RAM_DISK_S2
			LEVEL0_SNOWFLAK_ADDR = 0xF5C4

			LEVEL0_TI0_DATA_RAM_DISK_M = RAM_DISK_M2
			LEVEL0_TI0_DATA_RAM_DISK_S = RAM_DISK_S2
			LEVEL0_TI0_DATA_ADDR = 0xF904

			LEVEL0_PAL_LV0_RAM_DISK_M = RAM_DISK_M2
			LEVEL0_PAL_LV0_RAM_DISK_S = RAM_DISK_S2
			LEVEL0_PAL_LV0_ADDR = 0xFA68

			LEVEL0_LV0_DATA_RAM_DISK_M = RAM_DISK_M3
			LEVEL0_LV0_DATA_RAM_DISK_S = RAM_DISK_S3
			LEVEL0_LV0_DATA_ADDR = 0x8000

			LEVEL0_KNIGHT_RAM_DISK_M = RAM_DISK_M3
			LEVEL0_KNIGHT_RAM_DISK_S = RAM_DISK_S3
			LEVEL0_KNIGHT_ADDR = 0x972E

			LEVEL0_NPC4_RAM_DISK_M = RAM_DISK_M3
			LEVEL0_NPC4_RAM_DISK_S = RAM_DISK_S3
			LEVEL0_NPC4_ADDR = 0xC0D6

			LEVEL0_SKELETON_RAM_DISK_M = RAM_DISK_M3
			LEVEL0_SKELETON_RAM_DISK_S = RAM_DISK_S3
			LEVEL0_SKELETON_ADDR = 0xE17A

			LEVEL0_SCYTHE_RAM_DISK_M = RAM_DISK_M3
			LEVEL0_SCYTHE_RAM_DISK_S = RAM_DISK_S3
			LEVEL0_SCYTHE_ADDR = 0xFB7E


load_level0_load_params:
			FILE_LOAD_PARAMS(CAT_FILENAME_PTR, LEVEL0_CAT_RAM_DISK_S, LEVEL0_CAT_ADDR, CAT_FILE_LEN)
			FILE_LOAD_PARAMS(LV0_GFX_FILENAME_PTR, LEVEL0_LV0_GFX_RAM_DISK_S, LEVEL0_LV0_GFX_ADDR, LV0_GFX_FILE_LEN)
			FILE_LOAD_PARAMS(BURNER_FILENAME_PTR, LEVEL0_BURNER_RAM_DISK_S, LEVEL0_BURNER_ADDR, BURNER_FILE_LEN)
			FILE_LOAD_PARAMS(SWORD_FILENAME_PTR, LEVEL0_SWORD_RAM_DISK_S, LEVEL0_SWORD_ADDR, SWORD_FILE_LEN)
			FILE_LOAD_PARAMS(TXT_LV0_FILENAME_PTR, LEVEL0_TXT_LV0_RAM_DISK_S, LEVEL0_TXT_LV0_ADDR, TXT_LV0_FILE_LEN)
			FILE_LOAD_PARAMS(TI0_GFX_FILENAME_PTR, LEVEL0_TI0_GFX_RAM_DISK_S, LEVEL0_TI0_GFX_ADDR, TI0_GFX_FILE_LEN)
			FILE_LOAD_PARAMS(NPC_FILENAME_PTR, LEVEL0_NPC_RAM_DISK_S, LEVEL0_NPC_ADDR, NPC_FILE_LEN)
			FILE_LOAD_PARAMS(GOOSE_FILENAME_PTR, LEVEL0_GOOSE_RAM_DISK_S, LEVEL0_GOOSE_ADDR, GOOSE_FILE_LEN)
			FILE_LOAD_PARAMS(FIREPOOL_FILENAME_PTR, LEVEL0_FIREPOOL_RAM_DISK_S, LEVEL0_FIREPOOL_ADDR, FIREPOOL_FILE_LEN)
			FILE_LOAD_PARAMS(HERO_FILENAME_PTR, LEVEL0_HERO_RAM_DISK_S, LEVEL0_HERO_ADDR, HERO_FILE_LEN)
			FILE_LOAD_PARAMS(SNOWFLAK_FILENAME_PTR, LEVEL0_SNOWFLAK_RAM_DISK_S, LEVEL0_SNOWFLAK_ADDR, SNOWFLAK_FILE_LEN)
			FILE_LOAD_PARAMS(TI0_DATA_FILENAME_PTR, LEVEL0_TI0_DATA_RAM_DISK_S, LEVEL0_TI0_DATA_ADDR, TI0_DATA_FILE_LEN)
			FILE_LOAD_PARAMS(PAL_LV0_FILENAME_PTR, LEVEL0_PAL_LV0_RAM_DISK_S, LEVEL0_PAL_LV0_ADDR, PAL_LV0_FILE_LEN)
			FILE_LOAD_PARAMS(LV0_DATA_FILENAME_PTR, LEVEL0_LV0_DATA_RAM_DISK_S, LEVEL0_LV0_DATA_ADDR, LV0_DATA_FILE_LEN)
			FILE_LOAD_PARAMS(KNIGHT_FILENAME_PTR, LEVEL0_KNIGHT_RAM_DISK_S, LEVEL0_KNIGHT_ADDR, KNIGHT_FILE_LEN)
			FILE_LOAD_PARAMS(NPC4_FILENAME_PTR, LEVEL0_NPC4_RAM_DISK_S, LEVEL0_NPC4_ADDR, NPC4_FILE_LEN)
			FILE_LOAD_PARAMS(SKELETON_FILENAME_PTR, LEVEL0_SKELETON_RAM_DISK_S, LEVEL0_SKELETON_ADDR, SKELETON_FILE_LEN)
			FILE_LOAD_PARAMS(SCYTHE_FILENAME_PTR, LEVEL0_SCYTHE_RAM_DISK_S, LEVEL0_SCYTHE_ADDR, SCYTHE_FILE_LEN)

load_level0_sprite_init_data:
			.word cat_ram_disk_s_cmd
			.byte LEVEL0_CAT_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL0_CAT_ADDR
			.word burner_ram_disk_s_cmd
			.byte LEVEL0_BURNER_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL0_BURNER_ADDR
			.word sword_ram_disk_s_cmd
			.byte LEVEL0_SWORD_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL0_SWORD_ADDR
			.word npc_ram_disk_s_cmd
			.byte LEVEL0_NPC_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL0_NPC_ADDR
			.word goose_ram_disk_s_cmd
			.byte LEVEL0_GOOSE_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL0_GOOSE_ADDR
			.word firepool_ram_disk_s_cmd
			.byte LEVEL0_FIREPOOL_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL0_FIREPOOL_ADDR
			.word hero_ram_disk_s_cmd
			.byte LEVEL0_HERO_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL0_HERO_ADDR
			.word snowflake_ram_disk_s_cmd
			.byte LEVEL0_SNOWFLAK_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL0_SNOWFLAK_ADDR
			.word knight_ram_disk_s_cmd
			.byte LEVEL0_KNIGHT_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL0_KNIGHT_ADDR
			.word npc4_ram_disk_s_cmd
			.byte LEVEL0_NPC4_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL0_NPC4_ADDR
			.word skeleton_ram_disk_s_cmd
			.byte LEVEL0_SKELETON_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL0_SKELETON_ADDR
			.word scythe_ram_disk_s_cmd
			.byte LEVEL0_SCYTHE_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL0_SCYTHE_ADDR

load_level0:
			lxi h, load_level0_load_params
			mvi e, 18
			call load_files_from_params

			lxi h, load_level0_sprite_init_data
			mvi e, 12
			call sprite_init_meta_data

			lxi h, LEVEL0_LV0_GFX_RAM_DISK_M<<8 | LEVEL0_LV0_GFX_RAM_DISK_S
			lxi b, LEVEL0_LV0_GFX_ADDR
			call lv0_gfx_init

			mvi a, LEVEL0_TXT_LV0_RAM_DISK_S
			lxi h, LEVEL0_TXT_LV0_ADDR
			call text_ex_init_text

			mvi a, LEVEL0_TI0_GFX_RAM_DISK_S
			lxi h, LEVEL0_TI0_GFX_ADDR
			call tiled_img_init_gfx

			mvi a, LEVEL0_TI0_DATA_RAM_DISK_S
			lxi h, LEVEL0_TI0_DATA_ADDR
			call tiled_img_init_idxs

			lxi h, LEVEL0_LV0_DATA_RAM_DISK_M<<8 | LEVEL0_LV0_DATA_RAM_DISK_S
			lxi b, LEVEL0_LV0_DATA_ADDR
			call lv0_data_init

			ret

uninit_level0:
			lxi h, load_level0_sprite_init_data
			mvi e, 12
			call sprite_uninit_meta_data

			lxi h, LEVEL0_LV0_GFX_RAM_DISK_M<<8 | LEVEL0_LV0_GFX_RAM_DISK_S
			lxi b, $ffff - LEVEL0_LV0_GFX_ADDR + 1
			call lv0_gfx_init

			mvi a, LEVEL0_TI0_GFX_RAM_DISK_S
			lxi h, 0 ; global offset
			call tiled_img_init_gfx

			mvi a, LEVEL0_TI0_DATA_RAM_DISK_S
			lxi h, $ffff - LEVEL0_TI0_DATA_ADDR + 1
			call tiled_img_init_idxs

			lxi h, LEVEL0_LV0_DATA_RAM_DISK_M<<8 | LEVEL0_LV0_DATA_RAM_DISK_S
			lxi b, $ffff - LEVEL0_LV0_DATA_ADDR + 1
			call lv0_data_init

			ret
;===============================================
; level1
;===============================================
			LEVEL1_SWORD_RAM_DISK_M = RAM_DISK_M0
			LEVEL1_SWORD_RAM_DISK_S = RAM_DISK_S0
			LEVEL1_SWORD_ADDR = 0x0000

			LEVEL1_VAMPIRE_RAM_DISK_M = RAM_DISK_M0
			LEVEL1_VAMPIRE_RAM_DISK_S = RAM_DISK_S0
			LEVEL1_VAMPIRE_ADDR = 0x1790

			LEVEL1_TI0_GFX_RAM_DISK_M = RAM_DISK_M1
			LEVEL1_TI0_GFX_RAM_DISK_S = RAM_DISK_S1
			LEVEL1_TI0_GFX_ADDR = 0x8F3E

			LEVEL1_TNT_RAM_DISK_M = RAM_DISK_M1
			LEVEL1_TNT_RAM_DISK_S = RAM_DISK_S1
			LEVEL1_TNT_ADDR = 0x9CCA

			LEVEL1_HERO_RAM_DISK_M = RAM_DISK_M2
			LEVEL1_HERO_RAM_DISK_S = RAM_DISK_S2
			LEVEL1_HERO_ADDR = 0xB044

			LEVEL1_FIREPOOL_RAM_DISK_M = RAM_DISK_M2
			LEVEL1_FIREPOOL_RAM_DISK_S = RAM_DISK_S2
			LEVEL1_FIREPOOL_ADDR = 0xF5C4

			LEVEL1_TI0_DATA_RAM_DISK_M = RAM_DISK_M2
			LEVEL1_TI0_DATA_RAM_DISK_S = RAM_DISK_S2
			LEVEL1_TI0_DATA_ADDR = 0xF7F2

			LEVEL1_LV1_DATA_RAM_DISK_M = RAM_DISK_M3
			LEVEL1_LV1_DATA_RAM_DISK_S = RAM_DISK_S3
			LEVEL1_LV1_DATA_ADDR = 0x8000

			LEVEL1_KNIGHT_RAM_DISK_M = RAM_DISK_M3
			LEVEL1_KNIGHT_RAM_DISK_S = RAM_DISK_S3
			LEVEL1_KNIGHT_ADDR = 0x8346

			LEVEL1_SKELETON_RAM_DISK_M = RAM_DISK_M3
			LEVEL1_SKELETON_RAM_DISK_S = RAM_DISK_S3
			LEVEL1_SKELETON_ADDR = 0xACEE

			LEVEL1_LV1_GFX_RAM_DISK_M = RAM_DISK_M3
			LEVEL1_LV1_GFX_RAM_DISK_S = RAM_DISK_S3
			LEVEL1_LV1_GFX_ADDR = 0xC6F2

			LEVEL1_BURNER_RAM_DISK_M = RAM_DISK_M3
			LEVEL1_BURNER_RAM_DISK_S = RAM_DISK_S3
			LEVEL1_BURNER_ADDR = 0xE034

			LEVEL1_SCYTHE_RAM_DISK_M = RAM_DISK_M3
			LEVEL1_SCYTHE_RAM_DISK_S = RAM_DISK_S3
			LEVEL1_SCYTHE_ADDR = 0xF818

			LEVEL1_SNOWFLAK_RAM_DISK_M = RAM_DISK_M3
			LEVEL1_SNOWFLAK_RAM_DISK_S = RAM_DISK_S3
			LEVEL1_SNOWFLAK_ADDR = 0xFC44


load_level1_load_params:
			FILE_LOAD_PARAMS(SWORD_FILENAME_PTR, LEVEL1_SWORD_RAM_DISK_S, LEVEL1_SWORD_ADDR, SWORD_FILE_LEN)
			FILE_LOAD_PARAMS(VAMPIRE_FILENAME_PTR, LEVEL1_VAMPIRE_RAM_DISK_S, LEVEL1_VAMPIRE_ADDR, VAMPIRE_FILE_LEN)
			FILE_LOAD_PARAMS(TI0_GFX_FILENAME_PTR, LEVEL1_TI0_GFX_RAM_DISK_S, LEVEL1_TI0_GFX_ADDR, TI0_GFX_FILE_LEN)
			FILE_LOAD_PARAMS(TNT_FILENAME_PTR, LEVEL1_TNT_RAM_DISK_S, LEVEL1_TNT_ADDR, TNT_FILE_LEN)
			FILE_LOAD_PARAMS(HERO_FILENAME_PTR, LEVEL1_HERO_RAM_DISK_S, LEVEL1_HERO_ADDR, HERO_FILE_LEN)
			FILE_LOAD_PARAMS(FIREPOOL_FILENAME_PTR, LEVEL1_FIREPOOL_RAM_DISK_S, LEVEL1_FIREPOOL_ADDR, FIREPOOL_FILE_LEN)
			FILE_LOAD_PARAMS(TI0_DATA_FILENAME_PTR, LEVEL1_TI0_DATA_RAM_DISK_S, LEVEL1_TI0_DATA_ADDR, TI0_DATA_FILE_LEN)
			FILE_LOAD_PARAMS(LV1_DATA_FILENAME_PTR, LEVEL1_LV1_DATA_RAM_DISK_S, LEVEL1_LV1_DATA_ADDR, LV1_DATA_FILE_LEN)
			FILE_LOAD_PARAMS(KNIGHT_FILENAME_PTR, LEVEL1_KNIGHT_RAM_DISK_S, LEVEL1_KNIGHT_ADDR, KNIGHT_FILE_LEN)
			FILE_LOAD_PARAMS(SKELETON_FILENAME_PTR, LEVEL1_SKELETON_RAM_DISK_S, LEVEL1_SKELETON_ADDR, SKELETON_FILE_LEN)
			FILE_LOAD_PARAMS(LV1_GFX_FILENAME_PTR, LEVEL1_LV1_GFX_RAM_DISK_S, LEVEL1_LV1_GFX_ADDR, LV1_GFX_FILE_LEN)
			FILE_LOAD_PARAMS(BURNER_FILENAME_PTR, LEVEL1_BURNER_RAM_DISK_S, LEVEL1_BURNER_ADDR, BURNER_FILE_LEN)
			FILE_LOAD_PARAMS(SCYTHE_FILENAME_PTR, LEVEL1_SCYTHE_RAM_DISK_S, LEVEL1_SCYTHE_ADDR, SCYTHE_FILE_LEN)
			FILE_LOAD_PARAMS(SNOWFLAK_FILENAME_PTR, LEVEL1_SNOWFLAK_RAM_DISK_S, LEVEL1_SNOWFLAK_ADDR, SNOWFLAK_FILE_LEN)

load_level1_sprite_init_data:
			.word sword_ram_disk_s_cmd
			.byte LEVEL1_SWORD_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL1_SWORD_ADDR
			.word vampire_ram_disk_s_cmd
			.byte LEVEL1_VAMPIRE_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL1_VAMPIRE_ADDR
			.word tnt_ram_disk_s_cmd
			.byte LEVEL1_TNT_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL1_TNT_ADDR
			.word hero_ram_disk_s_cmd
			.byte LEVEL1_HERO_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL1_HERO_ADDR
			.word firepool_ram_disk_s_cmd
			.byte LEVEL1_FIREPOOL_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL1_FIREPOOL_ADDR
			.word knight_ram_disk_s_cmd
			.byte LEVEL1_KNIGHT_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL1_KNIGHT_ADDR
			.word skeleton_ram_disk_s_cmd
			.byte LEVEL1_SKELETON_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL1_SKELETON_ADDR
			.word burner_ram_disk_s_cmd
			.byte LEVEL1_BURNER_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL1_BURNER_ADDR
			.word scythe_ram_disk_s_cmd
			.byte LEVEL1_SCYTHE_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL1_SCYTHE_ADDR
			.word snowflake_ram_disk_s_cmd
			.byte LEVEL1_SNOWFLAK_RAM_DISK_S | RAM_DISK_M_BACKBUFF | RAM_DISK_M_8F
			.word LEVEL1_SNOWFLAK_ADDR

load_level1:
			lxi h, load_level1_load_params
			mvi e, 14
			call load_files_from_params

			lxi h, load_level1_sprite_init_data
			mvi e, 10
			call sprite_init_meta_data

			mvi a, LEVEL1_TI0_GFX_RAM_DISK_S
			lxi h, LEVEL1_TI0_GFX_ADDR
			call tiled_img_init_gfx

			mvi a, LEVEL1_TI0_DATA_RAM_DISK_S
			lxi h, LEVEL1_TI0_DATA_ADDR
			call tiled_img_init_idxs

			lxi h, LEVEL1_LV1_DATA_RAM_DISK_M<<8 | LEVEL1_LV1_DATA_RAM_DISK_S
			lxi b, LEVEL1_LV1_DATA_ADDR
			call lv1_data_init

			lxi h, LEVEL1_LV1_GFX_RAM_DISK_M<<8 | LEVEL1_LV1_GFX_RAM_DISK_S
			lxi b, LEVEL1_LV1_GFX_ADDR
			call lv1_gfx_init

			ret

uninit_level1:
			lxi h, load_level1_sprite_init_data
			mvi e, 10
			call sprite_uninit_meta_data

			mvi a, LEVEL1_TI0_GFX_RAM_DISK_S
			lxi h, $ffff - LEVEL1_TI0_GFX_ADDR + 1
			call tiled_img_init_gfx

			mvi a, LEVEL1_TI0_DATA_RAM_DISK_S
			lxi h, $ffff - LEVEL1_TI0_DATA_ADDR + 1
			call tiled_img_init_idxs

			lxi h, LEVEL1_LV1_DATA_RAM_DISK_M<<8 | LEVEL1_LV1_DATA_RAM_DISK_S
			lxi b, $ffff - LEVEL1_LV1_DATA_ADDR + 1
			call lv1_data_init

			lxi h, LEVEL1_LV1_GFX_RAM_DISK_M<<8 | LEVEL1_LV1_GFX_RAM_DISK_S
			lxi b, $ffff - LEVEL1_LV1_GFX_ADDR + 1
			call lv1_gfx_init

			ret
memusage_loads_end:
